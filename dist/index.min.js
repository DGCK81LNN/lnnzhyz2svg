var lnnzhyz2svg=(()=>{var N=Object.defineProperty;var he=Object.getOwnPropertyDescriptor;var ve=Object.getOwnPropertyNames;var ce=Object.prototype.hasOwnProperty;var G=(e,n)=>{for(var t in n)N(e,t,{get:n[t],enumerable:!0})},le=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of ve(n))!ce.call(e,o)&&o!==t&&N(e,o,{get:()=>n[o],enumerable:!(r=he(n,o))||r.enumerable});return e};var fe=e=>le(N({},"__esModule",{value:!0}),e);var Ne={};G(Ne,{PUA:()=>K,compileMandarin:()=>z,compileShidinn:()=>A,draw:()=>j,drawMandarin:()=>Me,drawShidinn:()=>He,elementEquals:()=>g});function O(e,...n){return e.trim().split(/\s+/g).map(r=>r.split(/_|(?=-)/g).map(i=>{let s={};i[0]==="-"&&(s.hyphen=!0,i=i.slice(1)),i[0]==="^"&&(s.proper=!0,i=i.slice(1));let a;for(let v of n)if(a=v(i),a)break;if(!a)throw new SyntaxError(`invalid character ${i}`);return Object.assign(s,a)}))}var de=/^(zh|ch|sh|[bpmfdtnlgkhjqxrzcs])?([iuy]|iu)?([aeo])?([iunr]|ng)?([1-4])$/,ue=/^(ng)()()()([1-4])$/,pe=/^()()(eh)()([1-4])$/,ge=/^([A-Za-z]|[ZzCcSs]h|[EeRr]r|[0-9]|[Xx][a-f])$/;function we(e){return e=e.toLowerCase(),e==="er"||e==="rr"?{modifier:"rr"}:e==="w"?{consonant:""}:["i","u","y"].includes(e)?{glide:e}:["a","o","e"].includes(e)?{vowel:e}:{consonant:e}}function xe(e){if(e==="hm"||e==="hng")return{main:{consonant:"h"},pre:[],post:[{consonant:e==="hm"?"m":""}]};let n=e.match(ue)||e.match(de)||e.match(pe);if(!n)return;let[,t,r,o,i,s]=n;if(!t&&!r&&!o&&!i)return;t==="ng"&&(t=""),i&&!o&&(o="e"),r==="iu"&&(r="y"),o==="o"&&(i==="u"?o="e":(t||r)&&(r=r==="i"?"y":"u",o="e"));let a={main:{consonant:t||""},pre:[],post:[]},v={...r?{glide:r}:null,...o?{vowel:o}:null,...i?{coda:i}:null,...s==="3"||s==="4"?{reversed:!0}:null};return(s==="2"||s==="3"?a.pre:a.post).push(v),a}function Ee(e){let n=e.match(ge);if(!n)return;let[,t]=n;return{main:we(t),pre:[],post:[]}}function z(e){return O(e,xe,Ee)}function f(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function y(e,n,t){return f(e,n)?e[n]:t}function D(e,n,t){return n||t?e.replace(/([hv])(-?)(\d+(?:\.\d+)?)/g,(r,o,i,s)=>((o==="h"?n:t)&&(i=i?"":"-"),`${o}${i}${s}`)).replace(/m(-?)(\d+(?:\.\d+)?),(-?)(\d+(?:\.\d+)?)/g,(r,o,i,s,a)=>(n&&(o=o?"":"-"),t&&(s=s?"":"-"),`m${o}${i},${s}${a}`)):e}function k(e,n){let t=e.length;for(let r=0;r<t;r++)if(n(e[r],r,e))return r;return t}function V(e,n){for(let t=e.length-1;t>=0;t--)if(n(e[t],t,e))return t;return-1}function F(e,n){for(let t in e)if(n(e[t],t))return t}function $(e,n,t){if(t in e)return t in n&&e[t]===n[t];if(t in n)return!1}function be(e,n){return!(!!e.reversed!=!!n.reversed||$(e,n,"glide")===!1||$(e,n,"vowel")===!1||$(e,n,"coda")===!1)}function g(e,n){return $(e,n,"consonant")??$(e,n,"modifier")??be(e,n)}var $e=/^([1-8ABDEFHLNTVYa-z]*)([457BDFHNbcdfghj-np-tv-z])(i(?![1E])|u(?![1A])|)([12368AELTVYaeo])([1-8ABD-FHLNTVYa-z]*)$/,ye=/^([1-8ABDEFHLNTVYa-z]*)([457BDFHNbcdfghj-np-tv-z])([iu])()([1-8ABD-FHLNTVYa-z]*)$/,Re=/^()([1-8ABDEFHLNTVYa-z]|X[0-9a-f])()()()$/,Ce={w:"v",y:"yj",n:"nj",D:"c",r:"rz",H:"nz",N:"ng",l:"n",4:"",5:"ngw",v:"nw",F:"dw",7:"tw",B:"gw",c:"kw"},P={...Object.fromEntries([..."bpmwjqxynzDsrHNldtgkh45vF7Bcf"].map(e=>[e,{consonant:y(Ce,e,e)}])),u:{glide:"u"},a:{vowel:"a"},o:{vowel:"oo"},e:{vowel:"e"},E:{vowel:"ii"},A:{vowel:"uu"},Y:{vowel:"a",coda:"i"},L:{vowel:"a",coda:"u"},6:{vowel:"e",coda:"u"},2:{vowel:"a",coda:"n"},T:{vowel:"a",coda:"ng"},8:{vowel:"e",coda:"n"},3:{vowel:"e",coda:"ng"},V:{vowel:"e",coda:"i"},1:{},i:{glide:"i"}};for(let e=0;e<16;e++){let n=e.toString(16);P[`X${n}`]={consonant:e<10?`${e}`:`x${n}`}}function Te(e,n){return!e&&!n?[]:[{...y(P,n),...e?{glide:e}:null}]}function W(e){return[...e].map(n=>y(P,n))}function A(e){return O(e,n=>{let t=n.match($e)||n.match(ye)||n.match(Re);if(!t)throw new SyntaxError(`Invalid Shidinn character ${n}`);let[,r,o,i,s,a]=t;return{pre:W(r),main:y(P,o),post:Te(i,s).concat(W(a))}})}var X={consonants:{"":"v12m0,-12h6v12",b:"v4h6m-6,-4h6v12",p:"h6v4h-6m0,-4v12",m:"h6v12m-6,0v-12m0,4h6",f:"h6m-6,0v12m0,-8h6",d:"h6v12m0,-8h-6v4h6",t:"h6m-6,0v12m0,-8h6v4h-6",n:"v12m0,-12h6v12m-6,-8h6m0,4h-6",l:"h6m-6,0v12m0,-8h6m-6,4h6",g:"h6v12m0,-4h-6v4",k:"h6m-6,0v12m0,-4h6v4",h:"h6m-6,0v12m0,-4h6",j:"h6v12m0,-8h-6v8m0,-4h6",q:"h6m-6,0v12m0,-8h6v8m-6,-4h6",x:"h6m-6,0v4h6v8m0,-4h-6v4",zh:"v8h6m-6,-4h6m-6,-4h6v12",ch:"v12m0,-12h6v8h-6m0,-4h6",sh:"v4h6m-6,-4h6v8h-6v4",r:"v8h6v4m-6,-12h6v4h-6",z:"h6v8h-6m6,-4h-6v8",c:"h6m-6,0v8h6m-6,-4h6v8",s:"h6m-6,0v4h6v8",v:"h6v12m-6,-8h6",yj:"h6v4h-6v8m0,-4h6v4",nj:"v4h6m-6,-4h6v12m0,-4h-6v4",rz:"h6v4h-6v8",nz:"h6m-6,0v12m0,-8h6v8",ng:"v12m0,-4h6m-6,-8h6v12",ngw:"v12m0,-12h6v8h-6",nw:"v12m0,-12h6v4h-6m0,4h6v4",dw:"v4h6m-6,-4h6v12m0,-4h-6",tw:"v12m0,-12h6v4h-6m0,4h6",gw:"h6v12m0,-8h-6m6,4h-6v4",kw:"v12m0,-12h6m0,4h-6m0,4h6v4","0":"v12","1":"v12m0,-4h6","2":"v12m4,-4v4","3":"v12m0,-4h6m-2,0v4","4":"v12m0,-8h4v4","5":"v12m0,-8h4v4m-4,0h6","6":"v12m0,-8h4v8","7":"v12m0,-8h4v8m-4,-4h6","8":"v12m4,-8h2v8","9":"v12m0,-4h6m-2,-4h2v8",xa:"v12m4,-4v4m0,-8h2v8",xb:"v12m0,-4h6m-2,0v4m0,-8h2v8",xc:"v12m0,-8h6v8m-2,-8v4",xd:"v12m0,-8h6v8m-2,-8v4m-4,0h6",xe:"v12m0,-8h6v8m-2,-8v8",xf:"v12m0,-8h6v8m-6,-4h6m-2,-4v8"},glides:{i:"v2",u:"m0,2h2",y:"v2h2"},vowels:{e:"v6h-2m2,0",a:"v4h-2v2h2",o:"v6h-2v-4h2m0,4",eh:"v6h-2v-6m2,6",oo:"v10h-2v-4h2",ii:"v6h-2v4",uu:"v10h-2"},codas:{i:"v-2",u:"h2",n:"v-2m2,0v2",ng:"h2m-2,-2h2",r:"h2v-2h-2v2"},modifiers:{rr:"m0,8h2v2h-2v-2"},narrowConsonants:{b:"v4h2m0,-4v(12)",p:"v(12)m0,-(8)h2v-4",m:"v(12)m2,-(12)v(12)m-2,-(8)h2",v:"m0,4h2m0,-4v(12)",j:"m2,0v(12)m0,-(8)h-2v(8)m0,-(4)h2",q:"v(12)m0,-(8)h2v(8)m-2,-(4)h2",x:"v4h2v(8)m0,-(4)h-2v(4)",yj:"m2,0v4h-2v(8)m0,-(4)h2v(4)",nj:"v4h2m0,-4v(12)m0,-(4)h-2v(4)",z:"m2,0v8h-2m2,-4h-2v(8)",c:"v8h2m-2,-4h2v(8)",s:"v4h2v(8)",r:"v8h2v(4)m0,-(12)v4h-2",rz:"m2,0v4h-2v(8)",nz:"v(12)m0,-(8)h2v(8)",ng:"v(12)m2,-(12)v(12)m-2,-(4)h2",n:"v(12)m2,-(12)v(12)m-2,-(8)h2m0,4h-2",d:"m2,0v(12)m0,-(8)h-2v4h2",t:"v(12)m0,-(8)h2v4h-2",g:"m2,0v(12)m0,-(4)h-2v(4)",k:"v(12)m0,-(4)h2v(4)",h:"v(12)m0,-(4)h2","":"v(12)m2,-(12)v(12)",ngw:"v(12)m2,-(12)v8h-2",nw:"v(12)m2,-(12)v4h-2m0,4h2v(4)",dw:"v4h2m0,-4v(12)m0,-(4)h-2",tw:"v(12)m2,-(12)v4h-2m0,4v(4)",gw:"m2,0v(12)m0,-(8)h-2m2,4h-2v(4)",kw:"v(12)m2,-(8)h-2m0,4h2v(4)",f:"v(12)m0,-(8)h2"}};var{consonants:Oe,glides:ze,vowels:De,codas:ke,modifiers:Z,narrowConsonants:Pe}=X;function I(e,n,t,r){if("consonant"in e)return`M${r?n:n-2},0`+Pe[e.consonant].replace(/\((\d+)\)/g,(i,s)=>t?s-2:s);if("modifier"in e)return`M${n-2},0`+Z[e.modifier];let o="";return"glide"in e&&(o+=`M${r?n+2:n-2},${e.reversed?12:0}`+D(ze[e.glide],r,e.reversed)),o+=`M${n},${e.reversed?12:0}`,"vowel"in e?(o+=D(De[e.vowel],r,e.reversed),"coda"in e?o+=`M${r?n+2:n-2},${e.reversed?2:10}`+D(ke[e.coda],r,e.reversed):["e","a","o","eh"].includes(e.vowel)&&(o+=`v${(e.reversed?-1:1)*(t?4:6)}`)):o+=`v${(e.reversed?-1:1)*(t?10:12)}`,o}function Ae(e){return!(e.reversed&&(e.coda||["oo","ii","uu"].includes(e.vowel)))}function j(e,n){let t="",r=0;e.forEach(M=>{let Y=r+4*k(M[0].pre,h=>h.reversed),H=1/0,_=[];M.forEach((h,me)=>{h.hyphen&&_.push(r-2);let p=r+4*k(h.pre,Ae),b=r+4*k(h.pre,l=>!l.reversed),U=r+4*h.pre.length;if(h.proper&&(t+=`M${r},-2v2`,p>r&&p<=b&&(t+=`H${p}`)),b<U&&((!h.proper||p===r||p<b)&&(t+=`M${b},0`),t+=`H${U}`),h.pre.forEach(l=>{t+=I(l,r,l.reversed?r<p||r>b:r>Y,!0),r+=4}),"modifier"in h.main?(t+=`M${r},0`+Z[h.main.modifier],r+=2):"consonant"in h.main?(t+=`M${r},0`+Oe[h.main.consonant],r+=6):(t+=`M${r},0h2`+I(h.main,r+2,!1,!1),r+=2),me===M.length-1&&(H=r+4*(V(h.post,l=>l.reversed)+1)),h.post.length){let l=r+4*(V(h.post,S=>!S.reversed)+1);l>r&&(t+=`M${r},0H${l}`),h.post.forEach(S=>{r+=4,t+=I(S,r,S.reversed?r<l:r<H,!1)})}r+=2}),t+=`M${Y},12`,_.forEach(h=>{t+=`H${h}v2h2v-2`}),t+=`H${H}`});let o=n?.strokeWidth??1,i=-.5-o/2,s=-2-o/2,a=r,v=16+o,c=v/16,T=-(2+o/2)/16;return n?.raw?{strokeWidth:o,left:i,top:s,width:a,height:v,heightEms:c,verticalAlignEms:T,d:t}:`<svg xmlns="http://www.w3.org/2000/svg" height="${c}em" viewBox="${i},${s},${a},${v}" style="vertical-align:${T}em"><path fill="none" stroke="currentColor" stroke-width="${o}" stroke-linecap="square" d="${t}"/></svg>`}var K={};G(K,{NotEncodedError:()=>L,ParseError:()=>E,parseCharacter:()=>ae,parseMixed:()=>Le,stringifyCharacter:()=>se,stringifyText:()=>je});var d=String.fromCodePoint;function J(e){return e===void 0?"EOF":e.toString(16).toUpperCase().padStart(4,"0")}var Q=!1,m={},B={},ee=57454,ne=57455,te={1:57456,2:57457,3:57458,4:57459},R={},u={},C={},re=57472,oe=57473,w={},x={};function ie(){if(!Q){for(let e=0;e<10;e++)m[57408+e]={consonant:String(e)};for(let e=10;e<16;e++)m[57408+e]={consonant:`x${e.toString(16)}`};",b,p,m,f,d,t,n,l,g,k,h,j,q,x,zh,ch,sh,r,z,c,s,v".split(",").forEach((e,n)=>{m[57424+n]={consonant:e},B[e]=57424+n}),"i,u,y".split(",").forEach((e,n)=>{m[57447+n]={glide:e},R[R[e]=57460+n]=e}),"e,a,o".split(",").forEach((e,n)=>{m[57450+n]={vowel:e},u[u[e]=57463+n]=e}),u[u.eh=57466]="eh",m[57453]={modifier:"rr"},"i,u,n,ng,r".split(",").forEach((e,n)=>{C[C[e]=57467+n]=e});{let e=57488,n=t=>{x[e++]={...t},w[e++]={...t},w[e++]={...t,reversed:!0},x[e++]={...t,reversed:!0}};for(let t of[null,{glide:"i"},{glide:"u"},{glide:"y"}]){n(t);for(let r of"ea")for(let o of[null,{coda:"i"},{coda:"u"},{coda:"n"},{coda:"ng"},{coda:"r"}])n({...t,vowel:r,...o})}n({vowel:"o"}),n({vowel:"o",coda:"ng"}),n({vowel:"eh"})}"yj,nj,rz,nz,ng,ngw,nw,dw,tw,gw,kw".split(",").forEach((e,n)=>{m[57712+n]={consonant:e}}),m[57728]={vowel:"oo"},m[57729]={vowel:"ii"},m[57730]={vowel:"uu"},m[57731]={vowel:"a",coda:"i"},m[57732]={vowel:"a",coda:"u"},m[57733]={vowel:"e",coda:"u"},m[57734]={vowel:"a",coda:"n"},m[57735]={vowel:"a",coda:"ng"},m[57736]={vowel:"e",coda:"n"},m[57737]={vowel:"e",coda:"ng"},m[57738]={vowel:"e",coda:"i"},m[57739]={};{let e=57744,n=t=>{x[e++]={...t},w[e++]={...t}};"b,p,m,v,j,q,x,yj,nj,z,c,s,rz,nz,ng,n,d,t,g,k,h,,ngw,nw,dw,tw,gw,kw,f".split(",").forEach(t=>n({consonant:t})),e=57808,n({vowel:"oo"}),n({vowel:"ii"}),n({vowel:"uu"}),e=57816,n({glide:"i",vowel:"oo"}),n({glide:"i",vowel:"uu"}),n({glide:"u",vowel:"oo"}),n({glide:"u",vowel:"ii"})}Q=!0}}var L=class extends Error{constructor(){super(...arguments);this.name="lnnzhyz2svg.PUA.NotEncodedError"}};function q(e,n){let t=F(e,r=>g(r,n));if(t===void 0)throw new L("Cannot stringify element "+JSON.stringify(n));return d(+t)}function se(e,n){ie();let t="";e.hyphen&&(t+=d(ee)),e.proper&&(t+=d(ne));e:if(n?.mandarin){if(e.pre.length+e.post.length!==1)break e;let r=t;if(!("consonant"in e.main)||!f(B,e.main.consonant))break e;r+=d(B[e.main.consonant]);let o=!!e.pre.length,i=o?e.pre[0]:e.post[0];if(!o&&e.main.consonant==="h"){if(g(i,{consonant:"m"}))return r+d(re);if(g(i,{consonant:""}))return r+d(oe)}if("consonant"in i||"modifier"in i)break e;let s=i.reversed?o?"3":"4":o?"2":"1";if(r+=d(te[s]),"glide"in i&&(r+=d(R[i.glide])),"vowel"in i){if(!f(u,i.vowel))break e;r+=d(u[i.vowel])}return"coda"in i&&(r+=d(C[i.coda])),r}for(let r of e.pre)t+=q(w,r);t+=q(m,e.main);for(let r of e.post)t+=q(x,r);return t}function je(e,n){return e.map(t=>t.map(r=>se(r,n)).join("")).join(" ")}var E=class extends Error{constructor(){super(...arguments);this.name="lnnzhyz2svg.PUA.ParseError"}};function ae(e){ie();let n=[...e].map(v=>v.codePointAt(0)),t=0,r={},o=[],i,s=[],a=v=>({source:String.fromCodePoint(...n.slice(0,t)),character:{...r,pre:o,main:i,post:s,...v}});if(n[t]===ee&&(t++,r.hyphen=!0),n[t]===57453)return t++,a({main:{modifier:"rr"}});for(n[t]===ne&&(t++,r.proper=!0);f(w,n[t]);)o.push(w[n[t++]]);if(!f(m,n[t]))throw new E(`Unexpected ${J(n[t])}, expected ${o.length?"consonant ":""}letter`);if(i=m[n[t]],o.length&&(!("consonant"in i)||/^\d$|^x[a-f]$/.test(i.consonant)))throw new E(`Unexpected ${J(n[t])}, expected consonant letter`);t++;e:if(!o.length){if(n[t]===re)return t++,a({post:[{consonant:"m"}]});if(n[t]===oe)return t++,a({post:[{consonant:"w"}]});let v=F(te,T=>T===n[t]);if(!v)break e;t++;let c={};(v==="3"||v==="4")&&(c.reversed=!0),f(R,n[t])&&(c.glide=R[n[t++]]);n:if(f(u,n[t])){if("glide"in c&&!["e","a"].includes(u[n[t]]))break n;c.vowel=u[n[t++]],f(C,n[t])&&(c.coda=C[n[t++]])}return a(v==="2"||v==="3"?{pre:[c]}:{post:[c]})}for(;f(x,n[t]);)s.push(x[n[t++]]);return a()}function Le(e){let n=[];for(;e.length;){let t=[];for(;e.length;){let r=e.codePointAt(0);if(r<57408||r>57823)break;let o;try{o=ae(e)}catch(a){if(a instanceof E)break;throw a}let{source:i,character:s}=o;t.push(s),e=e.slice(i.length)}if(t.length)n[n.length-1]===" "&&n.pop(),n.push(t);else{let r=String.fromCodePoint(e.codePointAt(0));typeof n[n.length-1]=="string"?n[n.length-1]+=r:n.push(r),e=e.slice(r.length)}}return n}function Me(e,n){return j(z(e),n)}function He(e,n){return j(A(e),n)}return fe(Ne);})();
